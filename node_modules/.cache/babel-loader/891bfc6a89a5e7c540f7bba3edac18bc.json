{"ast":null,"code":"/*!\r\nFullCalendar v5.11.5\r\nDocs & License: https://fullcalendar.io/\r\n(c) 2022 Adam Shaw\r\n*/\nimport './vdom.js';\nimport { __extends, __assign } from 'tslib';\nimport { flushSync, render, createElement, CalendarRoot, CustomContentRenderContext, CalendarContent, unmountComponentAtNode, DelayedRunner, CalendarDataManager, isArraysEqual, applyStyleProp, CalendarApi } from '@fullcalendar/common';\nexport * from '@fullcalendar/common';\nvar Calendar = /** @class */function (_super) {\n  __extends(Calendar, _super);\n  function Calendar(el, optionOverrides) {\n    if (optionOverrides === void 0) {\n      optionOverrides = {};\n    }\n    var _this = _super.call(this) || this;\n    _this.isRendering = false;\n    _this.isRendered = false;\n    _this.currentClassNames = [];\n    _this.customContentRenderId = 0; // will affect custom generated classNames?\n    _this.handleAction = function (action) {\n      // actions we know we want to render immediately\n      switch (action.type) {\n        case 'SET_EVENT_DRAG':\n        case 'SET_EVENT_RESIZE':\n          _this.renderRunner.tryDrain();\n      }\n    };\n    _this.handleData = function (data) {\n      _this.currentData = data;\n      _this.renderRunner.request(data.calendarOptions.rerenderDelay);\n    };\n    _this.handleRenderRequest = function () {\n      if (_this.isRendering) {\n        _this.isRendered = true;\n        var currentData_1 = _this.currentData;\n        flushSync(function () {\n          render(createElement(CalendarRoot, {\n            options: currentData_1.calendarOptions,\n            theme: currentData_1.theme,\n            emitter: currentData_1.emitter\n          }, function (classNames, height, isHeightAuto, forPrint) {\n            _this.setClassNames(classNames);\n            _this.setHeight(height);\n            return createElement(CustomContentRenderContext.Provider, {\n              value: _this.customContentRenderId\n            }, createElement(CalendarContent, __assign({\n              isHeightAuto: isHeightAuto,\n              forPrint: forPrint\n            }, currentData_1)));\n          }), _this.el);\n        });\n      } else if (_this.isRendered) {\n        _this.isRendered = false;\n        unmountComponentAtNode(_this.el);\n        _this.setClassNames([]);\n        _this.setHeight('');\n      }\n    };\n    _this.el = el;\n    _this.renderRunner = new DelayedRunner(_this.handleRenderRequest);\n    new CalendarDataManager({\n      optionOverrides: optionOverrides,\n      calendarApi: _this,\n      onAction: _this.handleAction,\n      onData: _this.handleData\n    });\n    return _this;\n  }\n  Object.defineProperty(Calendar.prototype, \"view\", {\n    get: function () {\n      return this.currentData.viewApi;\n    } // for public API\n    ,\n\n    enumerable: false,\n    configurable: true\n  });\n  Calendar.prototype.render = function () {\n    var wasRendering = this.isRendering;\n    if (!wasRendering) {\n      this.isRendering = true;\n    } else {\n      this.customContentRenderId += 1;\n    }\n    this.renderRunner.request();\n    if (wasRendering) {\n      this.updateSize();\n    }\n  };\n  Calendar.prototype.destroy = function () {\n    if (this.isRendering) {\n      this.isRendering = false;\n      this.renderRunner.request();\n    }\n  };\n  Calendar.prototype.updateSize = function () {\n    var _this = this;\n    flushSync(function () {\n      _super.prototype.updateSize.call(_this);\n    });\n  };\n  Calendar.prototype.batchRendering = function (func) {\n    this.renderRunner.pause('batchRendering');\n    func();\n    this.renderRunner.resume('batchRendering');\n  };\n  Calendar.prototype.pauseRendering = function () {\n    this.renderRunner.pause('pauseRendering');\n  };\n  Calendar.prototype.resumeRendering = function () {\n    this.renderRunner.resume('pauseRendering', true);\n  };\n  Calendar.prototype.resetOptions = function (optionOverrides, append) {\n    this.currentDataManager.resetOptions(optionOverrides, append);\n  };\n  Calendar.prototype.setClassNames = function (classNames) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      var classList = this.el.classList;\n      for (var _i = 0, _a = this.currentClassNames; _i < _a.length; _i++) {\n        var className = _a[_i];\n        classList.remove(className);\n      }\n      for (var _b = 0, classNames_1 = classNames; _b < classNames_1.length; _b++) {\n        var className = classNames_1[_b];\n        classList.add(className);\n      }\n      this.currentClassNames = classNames;\n    }\n  };\n  Calendar.prototype.setHeight = function (height) {\n    applyStyleProp(this.el, 'height', height);\n  };\n  return Calendar;\n}(CalendarApi);\nexport { Calendar };","map":{"version":3,"names":["__extends","Calendar","_super","el","optionOverrides","_this","call","isRendering","isRendered","currentClassNames","customContentRenderId","handleAction","action","type","renderRunner","tryDrain","handleData","data","currentData","request","calendarOptions","rerenderDelay","handleRenderRequest","currentData_1","flushSync","render","createElement","CalendarRoot","options","theme","emitter","classNames","height","isHeightAuto","forPrint","setClassNames","setHeight","CustomContentRenderContext","Provider","value","CalendarContent","__assign","unmountComponentAtNode","DelayedRunner","CalendarDataManager","calendarApi","onAction","onData","Object","defineProperty","prototype","get","viewApi","wasRendering","updateSize","destroy","batchRendering","func","pause","resume","pauseRendering","resumeRendering","resetOptions","append","currentDataManager","isArraysEqual","classList","_i","_a","length","className","remove","_b","classNames_1","add","applyStyleProp","CalendarApi"],"sources":["src/Calendar.tsx"],"sourcesContent":["import {\n  CalendarOptions, Action, CalendarContent, render, createElement, DelayedRunner, CssDimValue, applyStyleProp,\n  CalendarApi, CalendarRoot, isArraysEqual, CalendarDataManager, CalendarData,\n  CustomContentRenderContext, flushSync, unmountComponentAtNode,\n} from '@fullcalendar/common'\n\nexport class Calendar extends CalendarApi {\n  currentData: CalendarData\n  renderRunner: DelayedRunner\n  el: HTMLElement\n  isRendering = false\n  isRendered = false\n  currentClassNames: string[] = []\n  customContentRenderId = 0 // will affect custom generated classNames?\n\n  get view() { return this.currentData.viewApi } // for public API\n\n  constructor(el: HTMLElement, optionOverrides: CalendarOptions = {}) {\n    super()\n\n    this.el = el\n    this.renderRunner = new DelayedRunner(this.handleRenderRequest)\n\n    new CalendarDataManager({ // eslint-disable-line no-new\n      optionOverrides,\n      calendarApi: this,\n      onAction: this.handleAction,\n      onData: this.handleData,\n    })\n  }\n\n  handleAction = (action: Action) => {\n    // actions we know we want to render immediately\n    switch (action.type) {\n      case 'SET_EVENT_DRAG':\n      case 'SET_EVENT_RESIZE':\n        this.renderRunner.tryDrain()\n    }\n  }\n\n  handleData = (data: CalendarData) => {\n    this.currentData = data\n    this.renderRunner.request(data.calendarOptions.rerenderDelay)\n  }\n\n  handleRenderRequest = () => {\n    if (this.isRendering) {\n      this.isRendered = true\n      let { currentData } = this\n\n      flushSync(() => {\n        render(\n          <CalendarRoot options={currentData.calendarOptions} theme={currentData.theme} emitter={currentData.emitter}>\n            {(classNames, height, isHeightAuto, forPrint) => {\n              this.setClassNames(classNames)\n              this.setHeight(height)\n\n              return (\n                <CustomContentRenderContext.Provider value={this.customContentRenderId}>\n                  <CalendarContent\n                    isHeightAuto={isHeightAuto}\n                    forPrint={forPrint}\n                    {...currentData}\n                  />\n                </CustomContentRenderContext.Provider>\n              )\n            }}\n          </CalendarRoot>,\n          this.el,\n        )\n      })\n    } else if (this.isRendered) {\n      this.isRendered = false\n      unmountComponentAtNode(this.el)\n      this.setClassNames([])\n      this.setHeight('')\n    }\n  }\n\n  render() {\n    let wasRendering = this.isRendering\n\n    if (!wasRendering) {\n      this.isRendering = true\n    } else {\n      this.customContentRenderId += 1\n    }\n\n    this.renderRunner.request()\n\n    if (wasRendering) {\n      this.updateSize()\n    }\n  }\n\n  destroy() {\n    if (this.isRendering) {\n      this.isRendering = false\n      this.renderRunner.request()\n    }\n  }\n\n  updateSize() {\n    flushSync(() => {\n      super.updateSize()\n    })\n  }\n\n  batchRendering(func) {\n    this.renderRunner.pause('batchRendering')\n    func()\n    this.renderRunner.resume('batchRendering')\n  }\n\n  pauseRendering() { // available to plugins\n    this.renderRunner.pause('pauseRendering')\n  }\n\n  resumeRendering() { // available to plugins\n    this.renderRunner.resume('pauseRendering', true)\n  }\n\n  resetOptions(optionOverrides, append?) {\n    this.currentDataManager.resetOptions(optionOverrides, append)\n  }\n\n  setClassNames(classNames: string[]) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      let { classList } = this.el\n\n      for (let className of this.currentClassNames) {\n        classList.remove(className)\n      }\n\n      for (let className of classNames) {\n        classList.add(className)\n      }\n\n      this.currentClassNames = classNames\n    }\n  }\n\n  setHeight(height: CssDimValue) {\n    applyStyleProp(this.el, 'height', height)\n  }\n}\n"],"mappings":";;;;;;;;;;EAM8BA,SAAA,CAAAC,QAAA,EAAAC,MAAA;EAW5B,SAAAD,SAAYE,EAAe,EAAEC,eAAqC;IAArC,IAAAA,eAAA;MAAAA,eAAA,KAAqC;IAAA;IAAlE,IAAAC,KAAA,GACEH,MAAA,CAAAI,IAAA,MAAO;IARTD,KAAA,CAAAE,WAAW,GAAG,KAAK;IACnBF,KAAA,CAAAG,UAAU,GAAG,KAAK;IAClBH,KAAA,CAAAI,iBAAiB,GAAa,EAAE;IAChCJ,KAAA,CAAAK,qBAAqB,GAAG,CAAC;IAkBzBL,KAAA,CAAAM,YAAY,GAAG,UAACC,MAAc;;MAE5B,QAAQA,MAAM,CAACC,IAAI;QACjB,KAAK,gBAAgB;QACrB,KAAK,kBAAkB;UACrBR,KAAI,CAACS,YAAY,CAACC,QAAQ,EAAE;;KAEjC;IAEDV,KAAA,CAAAW,UAAU,GAAG,UAACC,IAAkB;MAC9BZ,KAAI,CAACa,WAAW,GAAGD,IAAI;MACvBZ,KAAI,CAACS,YAAY,CAACK,OAAO,CAACF,IAAI,CAACG,eAAe,CAACC,aAAa,CAAC;KAC9D;IAEDhB,KAAA,CAAAiB,mBAAmB,GAAG;MACpB,IAAIjB,KAAI,CAACE,WAAW,EAAE;QACpBF,KAAI,CAACG,UAAU,GAAG,IAAI;QAChB,IAAAe,aAAW,GAAKlB,KAAI,CAAAa,WAAT;QAEjBM,SAAS,CAAC;UACRC,MAAM,CACJC,aAAA,CAACC,YAAY;YAACC,OAAO,EAAEL,aAAW,CAACH,eAAe;YAAES,KAAK,EAAEN,aAAW,CAACM,KAAK;YAAEC,OAAO,EAAEP,aAAW,CAACO;UAAO,GACvG,UAACC,UAAU,EAAEC,MAAM,EAAEC,YAAY,EAAEC,QAAQ;YAC1C7B,KAAI,CAAC8B,aAAa,CAACJ,UAAU,CAAC;YAC9B1B,KAAI,CAAC+B,SAAS,CAACJ,MAAM,CAAC;YAEtB,OACEN,aAAA,CAACW,0BAA0B,CAACC,QAAQ;cAACC,KAAK,EAAElC,KAAI,CAACK;YAAqB,GACpEgB,aAAA,CAACc,eAAe,EAAAC,QAAA;cACdR,YAAY,EAAEA,YAAY;cAC1BC,QAAQ,EAAEA;YAAQ,GACdX,aAAW,EACf,CACkC;WAEzC,CACY,EACflB,KAAI,CAACF,EAAE,CACR;SACF,CAAC;OACH,MAAM,IAAIE,KAAI,CAACG,UAAU,EAAE;QAC1BH,KAAI,CAACG,UAAU,GAAG,KAAK;QACvBkC,sBAAsB,CAACrC,KAAI,CAACF,EAAE,CAAC;QAC/BE,KAAI,CAAC8B,aAAa,CAAC,EAAE,CAAC;QACtB9B,KAAI,CAAC+B,SAAS,CAAC,EAAE,CAAC;;KAErB;IAzDC/B,KAAI,CAACF,EAAE,GAAGA,EAAE;IACZE,KAAI,CAACS,YAAY,GAAG,IAAI6B,aAAa,CAACtC,KAAI,CAACiB,mBAAmB,CAAC;IAE/D,IAAIsB,mBAAmB,CAAC;MACtBxC,eAAe,EAAAA,eAAA;MACfyC,WAAW,EAAExC,KAAI;MACjByC,QAAQ,EAAEzC,KAAI,CAACM,YAAY;MAC3BoC,MAAM,EAAE1C,KAAI,CAACW;KACd,CAAC;;;EAbJgC,MAAA,CAAAC,cAAA,CAAIhD,QAAA,CAAAiD,SAAA,QAAI;SAAR,SAAAC,CAAA;MAAa,OAAO,IAAI,CAACjC,WAAW,CAACkC,OAAO;IAAA,CAAE;IAAA;;;;;EAgE9CnD,QAAA,CAAAiD,SAAA,CAAAzB,MAAM,GAAN;IACE,IAAI4B,YAAY,GAAG,IAAI,CAAC9C,WAAW;IAEnC,IAAI,CAAC8C,YAAY,EAAE;MACjB,IAAI,CAAC9C,WAAW,GAAG,IAAI;KACxB,MAAM;MACL,IAAI,CAACG,qBAAqB,IAAI,CAAC;;IAGjC,IAAI,CAACI,YAAY,CAACK,OAAO,EAAE;IAE3B,IAAIkC,YAAY,EAAE;MAChB,IAAI,CAACC,UAAU,EAAE;;GAEpB;EAEDrD,QAAA,CAAAiD,SAAA,CAAAK,OAAO,GAAP;IACE,IAAI,IAAI,CAAChD,WAAW,EAAE;MACpB,IAAI,CAACA,WAAW,GAAG,KAAK;MACxB,IAAI,CAACO,YAAY,CAACK,OAAO,EAAE;;GAE9B;EAEDlB,QAAA,CAAAiD,SAAA,CAAAI,UAAU,GAAV;IAAA,IAAAjD,KAAA;IACEmB,SAAS,CAAC;MACRtB,MAAA,CAAAgD,SAAA,CAAMI,UAAU,CAAAhD,IAAA,CAAAD,KAAA,CAAE;KACnB,CAAC;GACH;EAEDJ,QAAA,CAAAiD,SAAA,CAAAM,cAAc,GAAd,UAAeC,IAAI;IACjB,IAAI,CAAC3C,YAAY,CAAC4C,KAAK,CAAC,gBAAgB,CAAC;IACzCD,IAAI,EAAE;IACN,IAAI,CAAC3C,YAAY,CAAC6C,MAAM,CAAC,gBAAgB,CAAC;GAC3C;EAED1D,QAAA,CAAAiD,SAAA,CAAAU,cAAc,GAAd;IACE,IAAI,CAAC9C,YAAY,CAAC4C,KAAK,CAAC,gBAAgB,CAAC;GAC1C;EAEDzD,QAAA,CAAAiD,SAAA,CAAAW,eAAe,GAAf;IACE,IAAI,CAAC/C,YAAY,CAAC6C,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC;GACjD;EAED1D,QAAA,CAAAiD,SAAA,CAAAY,YAAY,GAAZ,UAAa1D,eAAe,EAAE2D,MAAO;IACnC,IAAI,CAACC,kBAAkB,CAACF,YAAY,CAAC1D,eAAe,EAAE2D,MAAM,CAAC;GAC9D;EAED9D,QAAA,CAAAiD,SAAA,CAAAf,aAAa,GAAb,UAAcJ,UAAoB;IAChC,IAAI,CAACkC,aAAa,CAAClC,UAAU,EAAE,IAAI,CAACtB,iBAAiB,CAAC,EAAE;MAChD,IAAAyD,SAAS,GAAK,IAAI,CAAC/D,EAAE,CAAA+D,SAAZ;MAEf,KAAsB,IAAAC,EAAA,IAAsB,EAAtBC,EAAA,OAAI,CAAC3D,iBAAiB,EAAtB0D,EAAA,GAAAC,EAAA,CAAAC,MAAsB,EAAtBF,EAAA,EAAsB,EAAE;QAAzC,IAAIG,SAAS,GAAAF,EAAA,CAAAD,EAAA;QAChBD,SAAS,CAACK,MAAM,CAACD,SAAS,CAAC;;MAG7B,KAAsB,IAAAE,EAAA,IAAU,EAAVC,YAAA,GAAA1C,UAAU,EAAVyC,EAAA,GAAAC,YAAA,CAAAJ,MAAU,EAAVG,EAAA,EAAU,EAAE;QAA7B,IAAIF,SAAS,GAAAG,YAAA,CAAAD,EAAA;QAChBN,SAAS,CAACQ,GAAG,CAACJ,SAAS,CAAC;;MAG1B,IAAI,CAAC7D,iBAAiB,GAAGsB,UAAU;;GAEtC;EAED9B,QAAA,CAAAiD,SAAA,CAAAd,SAAS,GAAT,UAAUJ,MAAmB;IAC3B2C,cAAc,CAAC,IAAI,CAACxE,EAAE,EAAE,QAAQ,EAAE6B,MAAM,CAAC;GAC1C;EACH,OAAA/B,QAAC;AAAD,CA3IA,CAA8B2E,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module"}