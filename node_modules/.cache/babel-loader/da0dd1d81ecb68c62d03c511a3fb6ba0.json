{"ast":null,"code":"var Reporter = require('../base').Reporter;\nvar EncoderBuffer = require('../base').EncoderBuffer;\nvar DecoderBuffer = require('../base').DecoderBuffer;\nvar assert = require('minimalistic-assert');\n\n// Supported tags\nvar tags = ['seq', 'seqof', 'set', 'setof', 'objid', 'bool', 'gentime', 'utctime', 'null_', 'enum', 'int', 'objDesc', 'bitstr', 'bmpstr', 'charstr', 'genstr', 'graphstr', 'ia5str', 'iso646str', 'numstr', 'octstr', 'printstr', 't61str', 'unistr', 'utf8str', 'videostr'];\n\n// Public methods list\nvar methods = ['key', 'obj', 'use', 'optional', 'explicit', 'implicit', 'def', 'choice', 'any', 'contains'].concat(tags);\n\n// Overrided methods list\nvar overrided = ['_peekTag', '_decodeTag', '_use', '_decodeStr', '_decodeObjid', '_decodeTime', '_decodeNull', '_decodeInt', '_decodeBool', '_decodeList', '_encodeComposite', '_encodeStr', '_encodeObjid', '_encodeTime', '_encodeNull', '_encodeInt', '_encodeBool'];\nfunction Node(enc, parent) {\n  var state = {};\n  this._baseState = state;\n  state.enc = enc;\n  state.parent = parent || null;\n  state.children = null;\n\n  // State\n  state.tag = null;\n  state.args = null;\n  state.reverseArgs = null;\n  state.choice = null;\n  state.optional = false;\n  state.any = false;\n  state.obj = false;\n  state.use = null;\n  state.useDecoder = null;\n  state.key = null;\n  state['default'] = null;\n  state.explicit = null;\n  state.implicit = null;\n  state.contains = null;\n\n  // Should create new instance on each method\n  if (!state.parent) {\n    state.children = [];\n    this._wrap();\n  }\n}\nmodule.exports = Node;\nvar stateProps = ['enc', 'parent', 'children', 'tag', 'args', 'reverseArgs', 'choice', 'optional', 'any', 'obj', 'use', 'alteredUse', 'key', 'default', 'explicit', 'implicit', 'contains'];\nNode.prototype.clone = function clone() {\n  var state = this._baseState;\n  var cstate = {};\n  stateProps.forEach(function (prop) {\n    cstate[prop] = state[prop];\n  });\n  var res = new this.constructor(cstate.parent);\n  res._baseState = cstate;\n  return res;\n};\nNode.prototype._wrap = function wrap() {\n  var state = this._baseState;\n  methods.forEach(function (method) {\n    this[method] = function _wrappedMethod() {\n      var clone = new this.constructor(this);\n      state.children.push(clone);\n      return clone[method].apply(clone, arguments);\n    };\n  }, this);\n};\nNode.prototype._init = function init(body) {\n  var state = this._baseState;\n  assert(state.parent === null);\n  body.call(this);\n\n  // Filter children\n  state.children = state.children.filter(function (child) {\n    return child._baseState.parent === this;\n  }, this);\n  assert.equal(state.children.length, 1, 'Root node can have only one child');\n};\nNode.prototype._useArgs = function useArgs(args) {\n  var state = this._baseState;\n\n  // Filter children and args\n  var children = args.filter(function (arg) {\n    return arg instanceof this.constructor;\n  }, this);\n  args = args.filter(function (arg) {\n    return !(arg instanceof this.constructor);\n  }, this);\n  if (children.length !== 0) {\n    assert(state.children === null);\n    state.children = children;\n\n    // Replace parent to maintain backward link\n    children.forEach(function (child) {\n      child._baseState.parent = this;\n    }, this);\n  }\n  if (args.length !== 0) {\n    assert(state.args === null);\n    state.args = args;\n    state.reverseArgs = args.map(function (arg) {\n      if (typeof arg !== 'object' || arg.constructor !== Object) return arg;\n      var res = {};\n      Object.keys(arg).forEach(function (key) {\n        if (key == (key | 0)) key |= 0;\n        var value = arg[key];\n        res[value] = key;\n      });\n      return res;\n    });\n  }\n};\n\n//\n// Overrided methods\n//\n\noverrided.forEach(function (method) {\n  Node.prototype[method] = function _overrided() {\n    var state = this._baseState;\n    throw new Error(method + ' not implemented for encoding: ' + state.enc);\n  };\n});\n\n//\n// Public methods\n//\n\ntags.forEach(function (tag) {\n  Node.prototype[tag] = function _tagMethod() {\n    var state = this._baseState;\n    var args = Array.prototype.slice.call(arguments);\n    assert(state.tag === null);\n    state.tag = tag;\n    this._useArgs(args);\n    return this;\n  };\n});\nNode.prototype.use = function use(item) {\n  assert(item);\n  var state = this._baseState;\n  assert(state.use === null);\n  state.use = item;\n  return this;\n};\nNode.prototype.optional = function optional() {\n  var state = this._baseState;\n  state.optional = true;\n  return this;\n};\nNode.prototype.def = function def(val) {\n  var state = this._baseState;\n  assert(state['default'] === null);\n  state['default'] = val;\n  state.optional = true;\n  return this;\n};\nNode.prototype.explicit = function explicit(num) {\n  var state = this._baseState;\n  assert(state.explicit === null && state.implicit === null);\n  state.explicit = num;\n  return this;\n};\nNode.prototype.implicit = function implicit(num) {\n  var state = this._baseState;\n  assert(state.explicit === null && state.implicit === null);\n  state.implicit = num;\n  return this;\n};\nNode.prototype.obj = function obj() {\n  var state = this._baseState;\n  var args = Array.prototype.slice.call(arguments);\n  state.obj = true;\n  if (args.length !== 0) this._useArgs(args);\n  return this;\n};\nNode.prototype.key = function key(newKey) {\n  var state = this._baseState;\n  assert(state.key === null);\n  state.key = newKey;\n  return this;\n};\nNode.prototype.any = function any() {\n  var state = this._baseState;\n  state.any = true;\n  return this;\n};\nNode.prototype.choice = function choice(obj) {\n  var state = this._baseState;\n  assert(state.choice === null);\n  state.choice = obj;\n  this._useArgs(Object.keys(obj).map(function (key) {\n    return obj[key];\n  }));\n  return this;\n};\nNode.prototype.contains = function contains(item) {\n  var state = this._baseState;\n  assert(state.use === null);\n  state.contains = item;\n  return this;\n};\n\n//\n// Decoding\n//\n\nNode.prototype._decode = function decode(input, options) {\n  var state = this._baseState;\n\n  // Decode root node\n  if (state.parent === null) return input.wrapResult(state.children[0]._decode(input, options));\n  var result = state['default'];\n  var present = true;\n  var prevKey = null;\n  if (state.key !== null) prevKey = input.enterKey(state.key);\n\n  // Check if tag is there\n  if (state.optional) {\n    var tag = null;\n    if (state.explicit !== null) tag = state.explicit;else if (state.implicit !== null) tag = state.implicit;else if (state.tag !== null) tag = state.tag;\n    if (tag === null && !state.any) {\n      // Trial and Error\n      var save = input.save();\n      try {\n        if (state.choice === null) this._decodeGeneric(state.tag, input, options);else this._decodeChoice(input, options);\n        present = true;\n      } catch (e) {\n        present = false;\n      }\n      input.restore(save);\n    } else {\n      present = this._peekTag(input, tag, state.any);\n      if (input.isError(present)) return present;\n    }\n  }\n\n  // Push object on stack\n  var prevObj;\n  if (state.obj && present) prevObj = input.enterObject();\n  if (present) {\n    // Unwrap explicit values\n    if (state.explicit !== null) {\n      var explicit = this._decodeTag(input, state.explicit);\n      if (input.isError(explicit)) return explicit;\n      input = explicit;\n    }\n    var start = input.offset;\n\n    // Unwrap implicit and normal values\n    if (state.use === null && state.choice === null) {\n      if (state.any) var save = input.save();\n      var body = this._decodeTag(input, state.implicit !== null ? state.implicit : state.tag, state.any);\n      if (input.isError(body)) return body;\n      if (state.any) result = input.raw(save);else input = body;\n    }\n    if (options && options.track && state.tag !== null) options.track(input.path(), start, input.length, 'tagged');\n    if (options && options.track && state.tag !== null) options.track(input.path(), input.offset, input.length, 'content');\n\n    // Select proper method for tag\n    if (state.any) result = result;else if (state.choice === null) result = this._decodeGeneric(state.tag, input, options);else result = this._decodeChoice(input, options);\n    if (input.isError(result)) return result;\n\n    // Decode children\n    if (!state.any && state.choice === null && state.children !== null) {\n      state.children.forEach(function decodeChildren(child) {\n        // NOTE: We are ignoring errors here, to let parser continue with other\n        // parts of encoded data\n        child._decode(input, options);\n      });\n    }\n\n    // Decode contained/encoded by schema, only in bit or octet strings\n    if (state.contains && (state.tag === 'octstr' || state.tag === 'bitstr')) {\n      var data = new DecoderBuffer(result);\n      result = this._getUse(state.contains, input._reporterState.obj)._decode(data, options);\n    }\n  }\n\n  // Pop object\n  if (state.obj && present) result = input.leaveObject(prevObj);\n\n  // Set key\n  if (state.key !== null && (result !== null || present === true)) input.leaveKey(prevKey, state.key, result);else if (prevKey !== null) input.exitKey(prevKey);\n  return result;\n};\nNode.prototype._decodeGeneric = function decodeGeneric(tag, input, options) {\n  var state = this._baseState;\n  if (tag === 'seq' || tag === 'set') return null;\n  if (tag === 'seqof' || tag === 'setof') return this._decodeList(input, tag, state.args[0], options);else if (/str$/.test(tag)) return this._decodeStr(input, tag, options);else if (tag === 'objid' && state.args) return this._decodeObjid(input, state.args[0], state.args[1], options);else if (tag === 'objid') return this._decodeObjid(input, null, null, options);else if (tag === 'gentime' || tag === 'utctime') return this._decodeTime(input, tag, options);else if (tag === 'null_') return this._decodeNull(input, options);else if (tag === 'bool') return this._decodeBool(input, options);else if (tag === 'objDesc') return this._decodeStr(input, tag, options);else if (tag === 'int' || tag === 'enum') return this._decodeInt(input, state.args && state.args[0], options);\n  if (state.use !== null) {\n    return this._getUse(state.use, input._reporterState.obj)._decode(input, options);\n  } else {\n    return input.error('unknown tag: ' + tag);\n  }\n};\nNode.prototype._getUse = function _getUse(entity, obj) {\n  var state = this._baseState;\n  // Create altered use decoder if implicit is set\n  state.useDecoder = this._use(entity, obj);\n  assert(state.useDecoder._baseState.parent === null);\n  state.useDecoder = state.useDecoder._baseState.children[0];\n  if (state.implicit !== state.useDecoder._baseState.implicit) {\n    state.useDecoder = state.useDecoder.clone();\n    state.useDecoder._baseState.implicit = state.implicit;\n  }\n  return state.useDecoder;\n};\nNode.prototype._decodeChoice = function decodeChoice(input, options) {\n  var state = this._baseState;\n  var result = null;\n  var match = false;\n  Object.keys(state.choice).some(function (key) {\n    var save = input.save();\n    var node = state.choice[key];\n    try {\n      var value = node._decode(input, options);\n      if (input.isError(value)) return false;\n      result = {\n        type: key,\n        value: value\n      };\n      match = true;\n    } catch (e) {\n      input.restore(save);\n      return false;\n    }\n    return true;\n  }, this);\n  if (!match) return input.error('Choice not matched');\n  return result;\n};\n\n//\n// Encoding\n//\n\nNode.prototype._createEncoderBuffer = function createEncoderBuffer(data) {\n  return new EncoderBuffer(data, this.reporter);\n};\nNode.prototype._encode = function encode(data, reporter, parent) {\n  var state = this._baseState;\n  if (state['default'] !== null && state['default'] === data) return;\n  var result = this._encodeValue(data, reporter, parent);\n  if (result === undefined) return;\n  if (this._skipDefault(result, reporter, parent)) return;\n  return result;\n};\nNode.prototype._encodeValue = function encode(data, reporter, parent) {\n  var state = this._baseState;\n\n  // Decode root node\n  if (state.parent === null) return state.children[0]._encode(data, reporter || new Reporter());\n  var result = null;\n\n  // Set reporter to share it with a child class\n  this.reporter = reporter;\n\n  // Check if data is there\n  if (state.optional && data === undefined) {\n    if (state['default'] !== null) data = state['default'];else return;\n  }\n\n  // Encode children first\n  var content = null;\n  var primitive = false;\n  if (state.any) {\n    // Anything that was given is translated to buffer\n    result = this._createEncoderBuffer(data);\n  } else if (state.choice) {\n    result = this._encodeChoice(data, reporter);\n  } else if (state.contains) {\n    content = this._getUse(state.contains, parent)._encode(data, reporter);\n    primitive = true;\n  } else if (state.children) {\n    content = state.children.map(function (child) {\n      if (child._baseState.tag === 'null_') return child._encode(null, reporter, data);\n      if (child._baseState.key === null) return reporter.error('Child should have a key');\n      var prevKey = reporter.enterKey(child._baseState.key);\n      if (typeof data !== 'object') return reporter.error('Child expected, but input is not object');\n      var res = child._encode(data[child._baseState.key], reporter, data);\n      reporter.leaveKey(prevKey);\n      return res;\n    }, this).filter(function (child) {\n      return child;\n    });\n    content = this._createEncoderBuffer(content);\n  } else {\n    if (state.tag === 'seqof' || state.tag === 'setof') {\n      // TODO(indutny): this should be thrown on DSL level\n      if (!(state.args && state.args.length === 1)) return reporter.error('Too many args for : ' + state.tag);\n      if (!Array.isArray(data)) return reporter.error('seqof/setof, but data is not Array');\n      var child = this.clone();\n      child._baseState.implicit = null;\n      content = this._createEncoderBuffer(data.map(function (item) {\n        var state = this._baseState;\n        return this._getUse(state.args[0], data)._encode(item, reporter);\n      }, child));\n    } else if (state.use !== null) {\n      result = this._getUse(state.use, parent)._encode(data, reporter);\n    } else {\n      content = this._encodePrimitive(state.tag, data);\n      primitive = true;\n    }\n  }\n\n  // Encode data itself\n  var result;\n  if (!state.any && state.choice === null) {\n    var tag = state.implicit !== null ? state.implicit : state.tag;\n    var cls = state.implicit === null ? 'universal' : 'context';\n    if (tag === null) {\n      if (state.use === null) reporter.error('Tag could be omitted only for .use()');\n    } else {\n      if (state.use === null) result = this._encodeComposite(tag, primitive, cls, content);\n    }\n  }\n\n  // Wrap in explicit\n  if (state.explicit !== null) result = this._encodeComposite(state.explicit, false, 'context', result);\n  return result;\n};\nNode.prototype._encodeChoice = function encodeChoice(data, reporter) {\n  var state = this._baseState;\n  var node = state.choice[data.type];\n  if (!node) {\n    assert(false, data.type + ' not found in ' + JSON.stringify(Object.keys(state.choice)));\n  }\n  return node._encode(data.value, reporter);\n};\nNode.prototype._encodePrimitive = function encodePrimitive(tag, data) {\n  var state = this._baseState;\n  if (/str$/.test(tag)) return this._encodeStr(data, tag);else if (tag === 'objid' && state.args) return this._encodeObjid(data, state.reverseArgs[0], state.args[1]);else if (tag === 'objid') return this._encodeObjid(data, null, null);else if (tag === 'gentime' || tag === 'utctime') return this._encodeTime(data, tag);else if (tag === 'null_') return this._encodeNull();else if (tag === 'int' || tag === 'enum') return this._encodeInt(data, state.args && state.reverseArgs[0]);else if (tag === 'bool') return this._encodeBool(data);else if (tag === 'objDesc') return this._encodeStr(data, tag);else throw new Error('Unsupported tag: ' + tag);\n};\nNode.prototype._isNumstr = function isNumstr(str) {\n  return /^[0-9 ]*$/.test(str);\n};\nNode.prototype._isPrintstr = function isPrintstr(str) {\n  return /^[A-Za-z0-9 '\\(\\)\\+,\\-\\.\\/:=\\?]*$/.test(str);\n};","map":{"version":3,"names":["Reporter","require","EncoderBuffer","DecoderBuffer","assert","tags","methods","concat","overrided","Node","enc","parent","state","_baseState","children","tag","args","reverseArgs","choice","optional","any","obj","use","useDecoder","key","explicit","implicit","contains","_wrap","module","exports","stateProps","prototype","clone","cstate","forEach","prop","res","constructor","wrap","method","_wrappedMethod","push","apply","arguments","_init","init","body","call","filter","child","equal","length","_useArgs","useArgs","arg","map","Object","keys","value","_overrided","Error","_tagMethod","Array","slice","item","def","val","num","newKey","_decode","decode","input","options","wrapResult","result","present","prevKey","enterKey","save","_decodeGeneric","_decodeChoice","e","restore","_peekTag","isError","prevObj","enterObject","_decodeTag","start","offset","raw","track","path","decodeChildren","data","_getUse","_reporterState","leaveObject","leaveKey","exitKey","decodeGeneric","_decodeList","test","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeBool","_decodeInt","error","entity","_use","decodeChoice","match","some","node","type","_createEncoderBuffer","createEncoderBuffer","reporter","_encode","encode","_encodeValue","undefined","_skipDefault","content","primitive","_encodeChoice","isArray","_encodePrimitive","cls","_encodeComposite","encodeChoice","JSON","stringify","encodePrimitive","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool","_isNumstr","isNumstr","str","_isPrintstr","isPrintstr"],"sources":["C:/Users/Hai Hong/Desktop/EXAI/EXAI/node_modules/asn1.js/lib/asn1/base/node.js"],"sourcesContent":["var Reporter = require('../base').Reporter;\r\nvar EncoderBuffer = require('../base').EncoderBuffer;\r\nvar DecoderBuffer = require('../base').DecoderBuffer;\r\nvar assert = require('minimalistic-assert');\r\n\r\n// Supported tags\r\nvar tags = [\r\n  'seq', 'seqof', 'set', 'setof', 'objid', 'bool',\r\n  'gentime', 'utctime', 'null_', 'enum', 'int', 'objDesc',\r\n  'bitstr', 'bmpstr', 'charstr', 'genstr', 'graphstr', 'ia5str', 'iso646str',\r\n  'numstr', 'octstr', 'printstr', 't61str', 'unistr', 'utf8str', 'videostr'\r\n];\r\n\r\n// Public methods list\r\nvar methods = [\r\n  'key', 'obj', 'use', 'optional', 'explicit', 'implicit', 'def', 'choice',\r\n  'any', 'contains'\r\n].concat(tags);\r\n\r\n// Overrided methods list\r\nvar overrided = [\r\n  '_peekTag', '_decodeTag', '_use',\r\n  '_decodeStr', '_decodeObjid', '_decodeTime',\r\n  '_decodeNull', '_decodeInt', '_decodeBool', '_decodeList',\r\n\r\n  '_encodeComposite', '_encodeStr', '_encodeObjid', '_encodeTime',\r\n  '_encodeNull', '_encodeInt', '_encodeBool'\r\n];\r\n\r\nfunction Node(enc, parent) {\r\n  var state = {};\r\n  this._baseState = state;\r\n\r\n  state.enc = enc;\r\n\r\n  state.parent = parent || null;\r\n  state.children = null;\r\n\r\n  // State\r\n  state.tag = null;\r\n  state.args = null;\r\n  state.reverseArgs = null;\r\n  state.choice = null;\r\n  state.optional = false;\r\n  state.any = false;\r\n  state.obj = false;\r\n  state.use = null;\r\n  state.useDecoder = null;\r\n  state.key = null;\r\n  state['default'] = null;\r\n  state.explicit = null;\r\n  state.implicit = null;\r\n  state.contains = null;\r\n\r\n  // Should create new instance on each method\r\n  if (!state.parent) {\r\n    state.children = [];\r\n    this._wrap();\r\n  }\r\n}\r\nmodule.exports = Node;\r\n\r\nvar stateProps = [\r\n  'enc', 'parent', 'children', 'tag', 'args', 'reverseArgs', 'choice',\r\n  'optional', 'any', 'obj', 'use', 'alteredUse', 'key', 'default', 'explicit',\r\n  'implicit', 'contains'\r\n];\r\n\r\nNode.prototype.clone = function clone() {\r\n  var state = this._baseState;\r\n  var cstate = {};\r\n  stateProps.forEach(function(prop) {\r\n    cstate[prop] = state[prop];\r\n  });\r\n  var res = new this.constructor(cstate.parent);\r\n  res._baseState = cstate;\r\n  return res;\r\n};\r\n\r\nNode.prototype._wrap = function wrap() {\r\n  var state = this._baseState;\r\n  methods.forEach(function(method) {\r\n    this[method] = function _wrappedMethod() {\r\n      var clone = new this.constructor(this);\r\n      state.children.push(clone);\r\n      return clone[method].apply(clone, arguments);\r\n    };\r\n  }, this);\r\n};\r\n\r\nNode.prototype._init = function init(body) {\r\n  var state = this._baseState;\r\n\r\n  assert(state.parent === null);\r\n  body.call(this);\r\n\r\n  // Filter children\r\n  state.children = state.children.filter(function(child) {\r\n    return child._baseState.parent === this;\r\n  }, this);\r\n  assert.equal(state.children.length, 1, 'Root node can have only one child');\r\n};\r\n\r\nNode.prototype._useArgs = function useArgs(args) {\r\n  var state = this._baseState;\r\n\r\n  // Filter children and args\r\n  var children = args.filter(function(arg) {\r\n    return arg instanceof this.constructor;\r\n  }, this);\r\n  args = args.filter(function(arg) {\r\n    return !(arg instanceof this.constructor);\r\n  }, this);\r\n\r\n  if (children.length !== 0) {\r\n    assert(state.children === null);\r\n    state.children = children;\r\n\r\n    // Replace parent to maintain backward link\r\n    children.forEach(function(child) {\r\n      child._baseState.parent = this;\r\n    }, this);\r\n  }\r\n  if (args.length !== 0) {\r\n    assert(state.args === null);\r\n    state.args = args;\r\n    state.reverseArgs = args.map(function(arg) {\r\n      if (typeof arg !== 'object' || arg.constructor !== Object)\r\n        return arg;\r\n\r\n      var res = {};\r\n      Object.keys(arg).forEach(function(key) {\r\n        if (key == (key | 0))\r\n          key |= 0;\r\n        var value = arg[key];\r\n        res[value] = key;\r\n      });\r\n      return res;\r\n    });\r\n  }\r\n};\r\n\r\n//\r\n// Overrided methods\r\n//\r\n\r\noverrided.forEach(function(method) {\r\n  Node.prototype[method] = function _overrided() {\r\n    var state = this._baseState;\r\n    throw new Error(method + ' not implemented for encoding: ' + state.enc);\r\n  };\r\n});\r\n\r\n//\r\n// Public methods\r\n//\r\n\r\ntags.forEach(function(tag) {\r\n  Node.prototype[tag] = function _tagMethod() {\r\n    var state = this._baseState;\r\n    var args = Array.prototype.slice.call(arguments);\r\n\r\n    assert(state.tag === null);\r\n    state.tag = tag;\r\n\r\n    this._useArgs(args);\r\n\r\n    return this;\r\n  };\r\n});\r\n\r\nNode.prototype.use = function use(item) {\r\n  assert(item);\r\n  var state = this._baseState;\r\n\r\n  assert(state.use === null);\r\n  state.use = item;\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.optional = function optional() {\r\n  var state = this._baseState;\r\n\r\n  state.optional = true;\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.def = function def(val) {\r\n  var state = this._baseState;\r\n\r\n  assert(state['default'] === null);\r\n  state['default'] = val;\r\n  state.optional = true;\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.explicit = function explicit(num) {\r\n  var state = this._baseState;\r\n\r\n  assert(state.explicit === null && state.implicit === null);\r\n  state.explicit = num;\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.implicit = function implicit(num) {\r\n  var state = this._baseState;\r\n\r\n  assert(state.explicit === null && state.implicit === null);\r\n  state.implicit = num;\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.obj = function obj() {\r\n  var state = this._baseState;\r\n  var args = Array.prototype.slice.call(arguments);\r\n\r\n  state.obj = true;\r\n\r\n  if (args.length !== 0)\r\n    this._useArgs(args);\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.key = function key(newKey) {\r\n  var state = this._baseState;\r\n\r\n  assert(state.key === null);\r\n  state.key = newKey;\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.any = function any() {\r\n  var state = this._baseState;\r\n\r\n  state.any = true;\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.choice = function choice(obj) {\r\n  var state = this._baseState;\r\n\r\n  assert(state.choice === null);\r\n  state.choice = obj;\r\n  this._useArgs(Object.keys(obj).map(function(key) {\r\n    return obj[key];\r\n  }));\r\n\r\n  return this;\r\n};\r\n\r\nNode.prototype.contains = function contains(item) {\r\n  var state = this._baseState;\r\n\r\n  assert(state.use === null);\r\n  state.contains = item;\r\n\r\n  return this;\r\n};\r\n\r\n//\r\n// Decoding\r\n//\r\n\r\nNode.prototype._decode = function decode(input, options) {\r\n  var state = this._baseState;\r\n\r\n  // Decode root node\r\n  if (state.parent === null)\r\n    return input.wrapResult(state.children[0]._decode(input, options));\r\n\r\n  var result = state['default'];\r\n  var present = true;\r\n\r\n  var prevKey = null;\r\n  if (state.key !== null)\r\n    prevKey = input.enterKey(state.key);\r\n\r\n  // Check if tag is there\r\n  if (state.optional) {\r\n    var tag = null;\r\n    if (state.explicit !== null)\r\n      tag = state.explicit;\r\n    else if (state.implicit !== null)\r\n      tag = state.implicit;\r\n    else if (state.tag !== null)\r\n      tag = state.tag;\r\n\r\n    if (tag === null && !state.any) {\r\n      // Trial and Error\r\n      var save = input.save();\r\n      try {\r\n        if (state.choice === null)\r\n          this._decodeGeneric(state.tag, input, options);\r\n        else\r\n          this._decodeChoice(input, options);\r\n        present = true;\r\n      } catch (e) {\r\n        present = false;\r\n      }\r\n      input.restore(save);\r\n    } else {\r\n      present = this._peekTag(input, tag, state.any);\r\n\r\n      if (input.isError(present))\r\n        return present;\r\n    }\r\n  }\r\n\r\n  // Push object on stack\r\n  var prevObj;\r\n  if (state.obj && present)\r\n    prevObj = input.enterObject();\r\n\r\n  if (present) {\r\n    // Unwrap explicit values\r\n    if (state.explicit !== null) {\r\n      var explicit = this._decodeTag(input, state.explicit);\r\n      if (input.isError(explicit))\r\n        return explicit;\r\n      input = explicit;\r\n    }\r\n\r\n    var start = input.offset;\r\n\r\n    // Unwrap implicit and normal values\r\n    if (state.use === null && state.choice === null) {\r\n      if (state.any)\r\n        var save = input.save();\r\n      var body = this._decodeTag(\r\n        input,\r\n        state.implicit !== null ? state.implicit : state.tag,\r\n        state.any\r\n      );\r\n      if (input.isError(body))\r\n        return body;\r\n\r\n      if (state.any)\r\n        result = input.raw(save);\r\n      else\r\n        input = body;\r\n    }\r\n\r\n    if (options && options.track && state.tag !== null)\r\n      options.track(input.path(), start, input.length, 'tagged');\r\n\r\n    if (options && options.track && state.tag !== null)\r\n      options.track(input.path(), input.offset, input.length, 'content');\r\n\r\n    // Select proper method for tag\r\n    if (state.any)\r\n      result = result;\r\n    else if (state.choice === null)\r\n      result = this._decodeGeneric(state.tag, input, options);\r\n    else\r\n      result = this._decodeChoice(input, options);\r\n\r\n    if (input.isError(result))\r\n      return result;\r\n\r\n    // Decode children\r\n    if (!state.any && state.choice === null && state.children !== null) {\r\n      state.children.forEach(function decodeChildren(child) {\r\n        // NOTE: We are ignoring errors here, to let parser continue with other\r\n        // parts of encoded data\r\n        child._decode(input, options);\r\n      });\r\n    }\r\n\r\n    // Decode contained/encoded by schema, only in bit or octet strings\r\n    if (state.contains && (state.tag === 'octstr' || state.tag === 'bitstr')) {\r\n      var data = new DecoderBuffer(result);\r\n      result = this._getUse(state.contains, input._reporterState.obj)\r\n          ._decode(data, options);\r\n    }\r\n  }\r\n\r\n  // Pop object\r\n  if (state.obj && present)\r\n    result = input.leaveObject(prevObj);\r\n\r\n  // Set key\r\n  if (state.key !== null && (result !== null || present === true))\r\n    input.leaveKey(prevKey, state.key, result);\r\n  else if (prevKey !== null)\r\n    input.exitKey(prevKey);\r\n\r\n  return result;\r\n};\r\n\r\nNode.prototype._decodeGeneric = function decodeGeneric(tag, input, options) {\r\n  var state = this._baseState;\r\n\r\n  if (tag === 'seq' || tag === 'set')\r\n    return null;\r\n  if (tag === 'seqof' || tag === 'setof')\r\n    return this._decodeList(input, tag, state.args[0], options);\r\n  else if (/str$/.test(tag))\r\n    return this._decodeStr(input, tag, options);\r\n  else if (tag === 'objid' && state.args)\r\n    return this._decodeObjid(input, state.args[0], state.args[1], options);\r\n  else if (tag === 'objid')\r\n    return this._decodeObjid(input, null, null, options);\r\n  else if (tag === 'gentime' || tag === 'utctime')\r\n    return this._decodeTime(input, tag, options);\r\n  else if (tag === 'null_')\r\n    return this._decodeNull(input, options);\r\n  else if (tag === 'bool')\r\n    return this._decodeBool(input, options);\r\n  else if (tag === 'objDesc')\r\n    return this._decodeStr(input, tag, options);\r\n  else if (tag === 'int' || tag === 'enum')\r\n    return this._decodeInt(input, state.args && state.args[0], options);\r\n\r\n  if (state.use !== null) {\r\n    return this._getUse(state.use, input._reporterState.obj)\r\n        ._decode(input, options);\r\n  } else {\r\n    return input.error('unknown tag: ' + tag);\r\n  }\r\n};\r\n\r\nNode.prototype._getUse = function _getUse(entity, obj) {\r\n\r\n  var state = this._baseState;\r\n  // Create altered use decoder if implicit is set\r\n  state.useDecoder = this._use(entity, obj);\r\n  assert(state.useDecoder._baseState.parent === null);\r\n  state.useDecoder = state.useDecoder._baseState.children[0];\r\n  if (state.implicit !== state.useDecoder._baseState.implicit) {\r\n    state.useDecoder = state.useDecoder.clone();\r\n    state.useDecoder._baseState.implicit = state.implicit;\r\n  }\r\n  return state.useDecoder;\r\n};\r\n\r\nNode.prototype._decodeChoice = function decodeChoice(input, options) {\r\n  var state = this._baseState;\r\n  var result = null;\r\n  var match = false;\r\n\r\n  Object.keys(state.choice).some(function(key) {\r\n    var save = input.save();\r\n    var node = state.choice[key];\r\n    try {\r\n      var value = node._decode(input, options);\r\n      if (input.isError(value))\r\n        return false;\r\n\r\n      result = { type: key, value: value };\r\n      match = true;\r\n    } catch (e) {\r\n      input.restore(save);\r\n      return false;\r\n    }\r\n    return true;\r\n  }, this);\r\n\r\n  if (!match)\r\n    return input.error('Choice not matched');\r\n\r\n  return result;\r\n};\r\n\r\n//\r\n// Encoding\r\n//\r\n\r\nNode.prototype._createEncoderBuffer = function createEncoderBuffer(data) {\r\n  return new EncoderBuffer(data, this.reporter);\r\n};\r\n\r\nNode.prototype._encode = function encode(data, reporter, parent) {\r\n  var state = this._baseState;\r\n  if (state['default'] !== null && state['default'] === data)\r\n    return;\r\n\r\n  var result = this._encodeValue(data, reporter, parent);\r\n  if (result === undefined)\r\n    return;\r\n\r\n  if (this._skipDefault(result, reporter, parent))\r\n    return;\r\n\r\n  return result;\r\n};\r\n\r\nNode.prototype._encodeValue = function encode(data, reporter, parent) {\r\n  var state = this._baseState;\r\n\r\n  // Decode root node\r\n  if (state.parent === null)\r\n    return state.children[0]._encode(data, reporter || new Reporter());\r\n\r\n  var result = null;\r\n\r\n  // Set reporter to share it with a child class\r\n  this.reporter = reporter;\r\n\r\n  // Check if data is there\r\n  if (state.optional && data === undefined) {\r\n    if (state['default'] !== null)\r\n      data = state['default']\r\n    else\r\n      return;\r\n  }\r\n\r\n  // Encode children first\r\n  var content = null;\r\n  var primitive = false;\r\n  if (state.any) {\r\n    // Anything that was given is translated to buffer\r\n    result = this._createEncoderBuffer(data);\r\n  } else if (state.choice) {\r\n    result = this._encodeChoice(data, reporter);\r\n  } else if (state.contains) {\r\n    content = this._getUse(state.contains, parent)._encode(data, reporter);\r\n    primitive = true;\r\n  } else if (state.children) {\r\n    content = state.children.map(function(child) {\r\n      if (child._baseState.tag === 'null_')\r\n        return child._encode(null, reporter, data);\r\n\r\n      if (child._baseState.key === null)\r\n        return reporter.error('Child should have a key');\r\n      var prevKey = reporter.enterKey(child._baseState.key);\r\n\r\n      if (typeof data !== 'object')\r\n        return reporter.error('Child expected, but input is not object');\r\n\r\n      var res = child._encode(data[child._baseState.key], reporter, data);\r\n      reporter.leaveKey(prevKey);\r\n\r\n      return res;\r\n    }, this).filter(function(child) {\r\n      return child;\r\n    });\r\n    content = this._createEncoderBuffer(content);\r\n  } else {\r\n    if (state.tag === 'seqof' || state.tag === 'setof') {\r\n      // TODO(indutny): this should be thrown on DSL level\r\n      if (!(state.args && state.args.length === 1))\r\n        return reporter.error('Too many args for : ' + state.tag);\r\n\r\n      if (!Array.isArray(data))\r\n        return reporter.error('seqof/setof, but data is not Array');\r\n\r\n      var child = this.clone();\r\n      child._baseState.implicit = null;\r\n      content = this._createEncoderBuffer(data.map(function(item) {\r\n        var state = this._baseState;\r\n\r\n        return this._getUse(state.args[0], data)._encode(item, reporter);\r\n      }, child));\r\n    } else if (state.use !== null) {\r\n      result = this._getUse(state.use, parent)._encode(data, reporter);\r\n    } else {\r\n      content = this._encodePrimitive(state.tag, data);\r\n      primitive = true;\r\n    }\r\n  }\r\n\r\n  // Encode data itself\r\n  var result;\r\n  if (!state.any && state.choice === null) {\r\n    var tag = state.implicit !== null ? state.implicit : state.tag;\r\n    var cls = state.implicit === null ? 'universal' : 'context';\r\n\r\n    if (tag === null) {\r\n      if (state.use === null)\r\n        reporter.error('Tag could be omitted only for .use()');\r\n    } else {\r\n      if (state.use === null)\r\n        result = this._encodeComposite(tag, primitive, cls, content);\r\n    }\r\n  }\r\n\r\n  // Wrap in explicit\r\n  if (state.explicit !== null)\r\n    result = this._encodeComposite(state.explicit, false, 'context', result);\r\n\r\n  return result;\r\n};\r\n\r\nNode.prototype._encodeChoice = function encodeChoice(data, reporter) {\r\n  var state = this._baseState;\r\n\r\n  var node = state.choice[data.type];\r\n  if (!node) {\r\n    assert(\r\n        false,\r\n        data.type + ' not found in ' +\r\n            JSON.stringify(Object.keys(state.choice)));\r\n  }\r\n  return node._encode(data.value, reporter);\r\n};\r\n\r\nNode.prototype._encodePrimitive = function encodePrimitive(tag, data) {\r\n  var state = this._baseState;\r\n\r\n  if (/str$/.test(tag))\r\n    return this._encodeStr(data, tag);\r\n  else if (tag === 'objid' && state.args)\r\n    return this._encodeObjid(data, state.reverseArgs[0], state.args[1]);\r\n  else if (tag === 'objid')\r\n    return this._encodeObjid(data, null, null);\r\n  else if (tag === 'gentime' || tag === 'utctime')\r\n    return this._encodeTime(data, tag);\r\n  else if (tag === 'null_')\r\n    return this._encodeNull();\r\n  else if (tag === 'int' || tag === 'enum')\r\n    return this._encodeInt(data, state.args && state.reverseArgs[0]);\r\n  else if (tag === 'bool')\r\n    return this._encodeBool(data);\r\n  else if (tag === 'objDesc')\r\n    return this._encodeStr(data, tag);\r\n  else\r\n    throw new Error('Unsupported tag: ' + tag);\r\n};\r\n\r\nNode.prototype._isNumstr = function isNumstr(str) {\r\n  return /^[0-9 ]*$/.test(str);\r\n};\r\n\r\nNode.prototype._isPrintstr = function isPrintstr(str) {\r\n  return /^[A-Za-z0-9 '\\(\\)\\+,\\-\\.\\/:=\\?]*$/.test(str);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}